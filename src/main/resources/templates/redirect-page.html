<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Survey Redirect</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
  <link rel="preload" as="image" href="/assets/images/redirect-page.png">
  <style>
    body {
      background-color: #f5f5f5;
      position: relative;
    }
    body::before {
      content: "";
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      width: 400px;
      height: 400px;
      background: url('/assets/images/redirect-page.png') no-repeat center center;
      background-size: contain;
      z-index: -1;
    }
    #continueBtn {
      min-width: 280px;
      min-height: 90px;
      margin-top: 246px;
      background: linear-gradient(90deg, #FFD700 0%, #FFC300 100%);
      color: #333;
      border: none;
      font-weight: bold;
      font-size: 1.5rem;
      box-shadow: 0 4px 16px #ffd70044;
    }
    #continueBtn:hover {
      background: linear-gradient(90deg, #FFC300 0%, #FFD700 100%);
      color: #222;
      box-shadow: 0 0 18px #ffd70088;
      transform: scale(1.07);
      transition: all 0.2s;
    }
  </style>
</head>
<body class="d-flex justify-content-center align-items-center vh-100">

<div class="text-center" style="margin-right: 30px;">
<!--  <h2 th:text="${companyName}">Amigo Insight</h2>-->
<!--  <p>Please click the button to proceed.</p>-->
  <button id="continueBtn" class="btn btn-lg d-flex align-items-center justify-content-center mx-auto">
    <span>Start Survey</span>
    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-arrow-right ms-2" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
    </svg>
  </button>
  <p id="message" class="text-danger mt-2"></p>
</div>

<script>
  document.getElementById("continueBtn").addEventListener("click", function () {
        // Extract vendorToken and country from the URL path
        const pathSegments = window.location.pathname.split("/");
        const vendorToken = pathSegments[pathSegments.length - 2] || "testVendorToken";
        const country = pathSegments[pathSegments.length - 1] || "USA";

        // Extract pid from query parameters
        const urlParams = new URLSearchParams(window.location.search);
        const pid = urlParams.get("PID") || "111";
        const uid = urlParams.get("UID") || "dsd";

      document.getElementById("message").innerText = "";
      window.location.href = `/survey?uid=${uid}&pid=${pid}&token=${vendorToken}&country=${country}`;
  });
</script>

</body>
</html>
